# Документация по библиотечной системе

## 1. Введение
Библиотечная система предназначена для управления книгами, учетами пользователей и обработкой заявок на выдачу. Система поддерживает роли библиотекарей и пользователей
## 2. Роли пользователей
- **Библиотекарь** – управляет книгами, CRUD.
- **Пользователь** – просматривает каталог книг, запрашивает выдачу.

## 3. Основные функциональные возможности
- Управление каталогом книг (добавление, редактирование, удаление)
- Регистрация и авторизация пользователей
- Регистрация и авторизация библиотекарей
- Запрос на выдачу и возврат книг

## 4. Структура базы данных
### Основные таблицы
- `users` (пользователи системы)
- `books` (каталог книг)
- `librarians` (библиотекари)
- `borrowed_books` ()



## 5. API
### Примеры эндпоинтов
- **POST `http://127.0.0.1:8000/v1/api/user/register`** – регистрация пользователя
```json 

{
  "name": "Кирилл Осипов",
  "email": "librarian@example.com",
  "password": "qwerty123",
  "password_confirmation": "qwerty123"
}
``` 
**POST `http://127.0.0.1:8000/v1/api/user/login`** – аутентификации пользователя и получение JWT токена 
```json
{
  "email": "librarian@example.com",
  "password": "qwerty123"
}
```
**POST `http://127.0.0.1:8000/v1/api/user/logout`** - выход с аккаунта

**POST `http://127.0.0.1:8000/v1/api/librarian/auth/login`** - аутентификация библиотекаря(регистрация проходит с помощью консольной команды `php artisan create:librarian "isername" librarian@example.com userpassword
`):

```json
{
  "email": "librarian@example.com",
  "password": "qwerty123"
}
```

- **GET `http://127.0.0.1:8000/v1/api/user/book`** – просмотр актуальных книг
- **POST `http://127.0.0.1:8000/v1/api/user/books/{book}/borrow`** – запрос на выдачу книги
- **POST `http://127.0.0.1:8000/v1/api/user/book/{book}/return`** – возврат книги
- 
- **POST `http://127.0.0.1:8000/v1/api/librarian/books`** –создание книги
- **PUT `http://127.0.0.1:8000/v1/api/librarian/books/{books}`** – обновление
- **GET`http://127.0.0.1:8000/v1/api/librarian/books`** - запрос списка книг
- **DELETE `http://127.0.0.1:8000/v1/api/librarian/books/{book}`** –удаление книги


## 6. Технические детали
- **Стек технологий:** PHP 8.2 (Laravel), PostgreSQL, PGadmin, Docker, Postman, Git, GitHub. 
- **Зависимости:** Laravel, PHP-FPM, Composer
- **Архитектура:** REST API, MVC, DTO(Data Transfer Object), JWT авторизация.

## 7. Деплой
1. Склонировать репозиторий Git Clone ...
2. Остановить Postgresql `sudo systemctl stop postgresql`
3. Развернуть контейнеры Docker (`docker-compose up -d db`)
4. настроить .env файл(использовать .env.example). для подключения к бд и pgadmin
5. также настраиваем .env файл в корне проекта.
6. Выполнить миграции (`php artisan migrate`)
7. Заполнить базу тестовыми данными (`php artisan db:seed`)(Книги)
8. Запустить сервер (`php artisan serve`)Запустить тесты, но сразу говорю они не все прошли((
9. Протестить в postman.
10. если что пишите в тг все объясню.

## 7. Замечания
1. Не вышло как следует провести контейнеризацию...
2. Слияние веток шло не по плану...
3. В репозитории следовало использовать транзакции...
4. В след раз использовать Presenter...
4. Не прошел один тест...

---

Эта документация будет дополняться по мере необходимости.

